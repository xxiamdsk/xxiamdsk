
name: Metrics
on:
  # üåè Think about the planet! No need to update stats too frequently
  schedule: [{cron: "0 0 * * *"}]
  # üí° The following line lets you run workflow manually from the action tab!
  workflow_dispatch:
  push: {branches: ["master", "main"]}
jobs:
  metrics:
    runs-on: ubuntu-latest
    environment: 
      name: production
    permissions:
      contents: write
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      
      - name: Set up Node.js # Optional, based on your environment
        uses: actions/setup-node@v2
        with:
          node-version: '14'
        
      - name: update header file
        run: |
          # Replace the line containing 'Original Line' with 'New Static Content'
          sed -i 's/Original Line/New Static Content/' base.header.ejs
      
      - name: commit and push changes
        run: |
          git config --global user.name 'xxiamdsk'
          git config --global user.email 'ds2390521@gmail.com'
          git add source/templates/classic/partials/base.header.ejs
          git commit -m 'Update header file'
          git push
          
        env:
          token: ${{ secrets.METRICS_TOKEN }}

      # - name: primary
      #   if: ${{ success() || failure() }}
      #   uses: lowlighter/metrics@master
      #   with:
      #     user: xxiamdsk
      #     template: classic
      #     filename: primary.svg
      #     token: ${{ secrets.METRICS_TOKEN }}
      #     base: header
          
